<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description"
        content="Find the best restaurant jobs in Kenya. We connect passionate chefs, servers, and bartenders with top establishments.">
    <title>RestaurantJobs | Top Culinary Careers in Kenya</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Playfair+Display:wght@500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="./style.css">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://restaurantjobs.pages.dev/">
    <meta property="og:title" content="RestaurantJobs | Top Culinary Careers in Kenya">
    <meta property="og:description"
        content="Find the best restaurant jobs in Kenya. We connect passionate chefs, servers, and bartenders with top establishments.">
    <meta property="og:image" content="https://restaurantjobs.pages.dev/kitchen-color.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://restaurantjobs.pages.dev/">
    <meta property="twitter:title" content="RestaurantJobs | Top Culinary Careers in Kenya">
    <meta property="twitter:description"
        content="Find the best restaurant jobs in Kenya. We connect passionate chefs, servers, and bartenders with top establishments.">
    <meta property="twitter:image" content="https://restaurantjobs.pages.dev/kitchen-color.png">
</head>

<body>
    <!-- Navigation -->
    <!-- Navigation -->
    <nav class="container">
        <a href="/" class="nav-brand">Restaurant<span style="color: var(--accent-color);">Jobs</span></a>

        <button id="mobile-menu-btn" class="mobile-menu-btn" aria-label="Toggle Menu">&#9776;</button>

        <div id="nav-links" class="nav-links">
            <a href="/">Home</a>
            <a href="/jobs.html">Find Jobs</a>
            <a href="/saved-jobs.html" id="nav-saved-jobs" style="display: none;">Saved Jobs</a>
            <a href="/employer-register.html">Submit Job</a>
            <a href="/apply.html" style="color: var(--accent-color);">Submit CV</a>
            <a href="/auth.html" id="nav-auth-btn">Sign In</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <header
        style="position: relative; height: 80vh; display: flex; align-items: center; justify-content: center; overflow: hidden; color: white; text-align: center;">
        <!-- ... (Hero content) ... -->
        <div class="hero-slideshow">
            <div class="hero-slide" style="background-image: url('/hero-dining.png');"></div>
            <div class="hero-slide" style="background-image: url('/hero-bar.png');"></div>
            <div class="hero-slide" style="background-image: url('/kitchen-color.png');"></div>
        </div>
        <div class="hero-overlay"></div>

        <div class="container fade-in" style="position: relative; z-index: 10;">
            <h1 style="font-size: 3.5rem; margin-bottom: 20px; color: #fff;">Hospitality Jobs Across Kenya</h1>
            <p
                style="font-size: 1.25rem; margin-bottom: 30px; max-width: 600px; margin-left: auto; margin-right: auto; opacity: 0.9;">
                Connecting Kenya's top hospitality talent with the best restaurants. We handle sourcing, interviewing,
                and vetting so you don't have to.
            </p>
            <a href="/jobs.html" class="btn" style="background-color: var(--accent-color); color: white;">Browse Kenyan
                Jobs</a>
        </div>
    </header>

    <!-- Featured Section -->
    <section class="featured-section container fade-in">
        <h2 style="font-size: 2.5rem; margin-bottom: 10px;">Featured Opportunities</h2>
        <p style="color: var(--text-muted); max-width: 600px; margin: 0 auto;">Hand-picked roles from Kenya's most
            prestigious establishments.</p>

        <div id="featured-grid" class="featured-grid">
            <!-- Loading -->
            <p>Loading top jobs...</p>
        </div>

        <div style="margin-top: 40px;">
            <a href="/jobs.html" class="btn-secondary">View All Positions</a>
        </div>
    </section>

    <!-- SEO Links Section -->
    <section class="container" style="margin-top: 60px; padding-bottom: 40px;">
        <h2 style="font-size: 1.5rem; margin-bottom: 20px;">Popular Searches</h2>
        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
            <a href="/chef-jobs-nairobi.html" class="tag-pill">Chef Jobs Nairobi</a>
            <a href="/waiter-jobs-nairobi.html" class="tag-pill">Waiter Jobs Nairobi</a>
            <a href="/waiter-jobs-mombasa.html" class="tag-pill">Waiter Jobs Mombasa</a>
            <a href="/manager-jobs-nairobi.html" class="tag-pill">Manager Jobs Nairobi</a>
            <a href="/barista-jobs-kisumu.html" class="tag-pill">Barista Jobs Kisumu</a>
            <a href="/blog-top-restaurants-2026.html" class="tag-pill highlight">Top 10 Restaurants 2026</a>
        </div>
    </section>

    <!-- Footer -->
    <footer style="background-color: var(--text-main); color: white; padding: 40px 0; margin-top: 40px;">
        <div class="container" style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 40px;">
            <div>
                <h4 style="color: white; margin-bottom: 10px;">RestaurantJobs</h4>
                <p style="color: #999; font-size: 0.9rem;">Kenya's Premier Hospitality Recruitment Agency.</p>
            </div>
            <div>
                <h5 style="color: white; margin-bottom: 10px; font-family: 'Nunito', sans-serif;">Contact</h5>
                <p style="color: #999; font-size: 0.9rem;">Westlands, Nairobi, Kenya</p>
                <p style="color: #999; font-size: 0.9rem;"><a href="mailto:info@restaurantjobs.co.ke"
                        style="color: #999;">info@restaurantjobs.co.ke</a></p>
                <p style="color: #999; font-size: 0.9rem;">+254 700 123 456</p>
            </div>
        </div>
    </footer>

    <!-- No Payment Modal for now -->

    <script type="module" src="/src/ui.js"></script>
    <script type="module">
        import { supabase } from './src/supabaseClient.js';
        import { isJobSaved, toggleSaveJob } from './src/ui.js';

        // Expose toggle to window
        window.toggleSave = function (id, btn) {
            const isNowSaved = toggleSaveJob(id);
            btn.innerText = isNowSaved ? '‚ô•' : '‚ô°';
            btn.style.color = isNowSaved ? 'var(--error-color)' : 'var(--text-muted)';
            if (isNowSaved) {
                btn.style.transform = 'scale(1.2)';
                setTimeout(() => btn.style.transform = 'scale(1)', 200);
            }
        };

        async function loadFeaturedJobs() {
            const grid = document.getElementById('featured-grid');
            try {
                // Fetch top 3 paying jobs
                const { data: jobs, error } = await supabase
                    .from('jobs')
                    .select('*')
                    .eq('status', 'published')
                    // .gt('salary_max', 40000) // Temporarily removed to prevent "column does not exist" error
                    .order('created_at', { ascending: false })
                    .limit(3);

                if (error) throw error;

                if (!jobs || jobs.length === 0) {
                    grid.innerHTML = '<p>No featured jobs at the moment.</p>';
                    return;
                }

                grid.innerHTML = '';
                jobs.forEach(job => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.style.textAlign = 'left';
                    card.style.display = 'flex';
                    card.style.flexDirection = 'column';
                    card.style.position = 'relative'; // For heart icon

                    const isSaved = isJobSaved(job.id);
                    const heartIcon = isSaved ? '‚ô•' : '‚ô°';
                    const heartColor = isSaved ? 'var(--error-color)' : 'var(--text-muted)';

                    card.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                            <h3 style="font-size: 1.25rem;">${job.title}</h3>
                            <span style="background: var(--accent-color); color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem;">Featured</span>
                        </div>
                        <div style="margin-bottom: 10px; color: var(--text-muted); font-size: 0.9rem;">
                            <span>üìç ${job.location}</span> ‚Ä¢ <span>üí∞ ${job.salary_max ? (job.salary_max / 1000) + 'k' : 'Competitive'}</span>
                        </div>
                        <p style="font-size: 0.9rem; margin-bottom: 20px; flex-grow: 1;">${job.description.substring(0, 100)}...</p>
                        <a href="/job-details.html?id=${job.id}" style="color: var(--accent-color); font-weight: 600;">Apply Now &rarr;</a>
                        <button onclick="toggleSave('${job.id}', this)" style="position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 1.5rem; color: ${heartColor}; cursor: pointer; transition: transform 0.2s;">${heartIcon}</button>
                    `;
                    grid.appendChild(card);
                });

            } catch (err) {
                console.error(err);
                grid.innerHTML = '<p>Could not load jobs.</p>';
            }
        }

        loadFeaturedJobs();
    </script>
</body>

</html>